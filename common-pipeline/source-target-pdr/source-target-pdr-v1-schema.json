{  
   "$schema":"http://json-schema.org/draft-04/schema#",
   "id":"http://www.ibm.com/ibm/wdp/pipeline-connection/v1.0/pipeline-connection-v1-schema.json#",
   "title":"Watson Data Platform Pipeline Connection Schema",
   "description":"Connection schema for pipelines in the Watson Data Platform",
   "definitions":{  
      "common_pipeline_connection_def":{  
         "description":"A source or target connection for the pipeline.",
         "properties":{  
            "app_data":{  
               "$ref":"http://www.ibm.com/ibm/wml/pipeline-flow/pipeline-flow-v1-schema.json#/definitions/app_data_def"
            },
            "connection":{  
               "description":"The connection details for this source or target. Mutually exclusive with physical_dataset.",
               "$ref":"#/definitions/common_pipeline_connection_connref_def"
            },
            "bindings":{  
               "$ref":"#/definitions/common_pipeline_connection_bindings_def"
            },
            "id":{  
               "description":"The unique ID of the object.",
               "type":"string"
            },
            "physical_dataset":{  
               "description":"The physical dataset details for this source or target. Mutually exclusive with connection.",
               "$ref":"#/definitions/common_pipeline_connection_physdatasetref_def"
            },
            "schema_ref":{  
               "description":"Optional dataset schema associated with the source or target",
               "type":"string"
            }
         },
         "required":[  
            "id"
         ],
         "type":"object"
      },
      "common_pipeline_connection_connref_def":{  
         "description":"Details of the connection to use for a pipeline source or target.",
         "properties":{  
            "connection_ref":{  
               "description":"A reference to a connection by ID.",
               "type":"string"
            },
            "connection_catalog_ref":{  
               "description":"If connection_ref is set, this refers to the ID of the catalog which contains the connection. If neither this attribute nor connection_project_ref are specified, the connection will be assumed to exist in the project or catalog which contains the pipeline.",
               "type":"string"
            },
            "connection_project_ref":{  
               "description":"If connection_ref is set, this refers to the ID of the project which contains the connection. If neither this attribute nor connection_catalog_ref are specified, the connection will be assumed to exist in the project or catalog which contains the pipeline.",
               "type":"string"
            },
            "connection_properties":{  
               "description":"The properties for the connection. The specific properties allowed depend on the type of connection referenced.",
               "additionalProperties": {
                  "type": "object"
               }
            }
         },
         "required":[  
            "connection_ref"
         ],
         "type":"object"
      },
      "common_pipeline_connection_bindings_def":{  
         "description":"The binding between a pipeline connection and one or more node or port definitions.",
         "items":{  
            "type":"object",
            "properties":{  
                "pipeline_id_ref": {
                  "description": "id of the pipeline this connection is bound to",
                  "type": "string"
                },
                "node_id_ref": {
                  "description": "id of a node this connection is bound to",
                  "type": "string"
                },
                "port_id_ref": {
                  "description": "optional port id of a node this connection is bound to",
                  "type": "string"
                }
            },
            "required":[  
               "dataset_ref"
            ]
         },
         "type":"array"
      },
      "common_pipeline_connection_physdatasetref_def":{  
         "description":"Details of the physical dataset (contained in a catalog or prjoject) to use for a pipeline source or target.",
         "properties":{  
            "physical_dataset_ref":{  
               "description":"A reference to a physical dataset by ID.",
               "type":"string"
            },
            "physical_dataset_catalog_ref":{  
               "description":"If physical_dataset_ref is set, this refers to the ID of the catalog which contains the physical dataset. If neither this attribute nor physical_dataset_project_ref are specified, the physical dataset will be assumed to exist in the project or catalog which contains the pipeline.",
               "type":"string"
            },
            "physical_dataset_project_ref":{  
               "description":"If physical_dataset_ref is set, this refers to the ID of the project which contains the physical dataset. If neither this attribute nor physical_dataset_catalog_ref are specified, the physical dataset will be assumed to exist in the project or catalog which contains the pipeline.",
               "type":"string"
            },
            "dataset_properties":{  
               "description":"Properties controlling how the physical dataset is used.",
               "type":"object",
               "properties":{  
                  "attachment_ref":{  
                     "description":"The ID of the physical dataset attachment to use. If not specified and used as a source, the first suitable attachment found will be used. If not specified and used as a target, a new attachment will be created.",
                     "type":"string"
                  },
                  "create_name":{  
                     "description":"When used as a target, specifies the name of the physical dataset to create if physical_dataset_ref is unset.",
                     "type":"boolean",
                     "default":false
                  },
                  "no_write_schema":{  
                     "description":"When used as a target, whether to update the physical data set with the schema when a run completes or not (will be automatically updated if not supplied by caller).",
                     "type":"boolean",
                     "default":false
                  },
                  "no_write_status":{  
                     "description":"When used as a target, whether to update the physical data set with the status when a run completes or not (will be automatically updated if not supplied by caller).",
                     "type":"boolean",
                     "default":false
                  }
               }
            }
         },
         "type":"object"
      }
   }
}